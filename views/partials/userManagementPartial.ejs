<!-- Admin View -->
<!-- User Management View in Admin -->

<!-- Errors -->
<div class="box box-solid box-primary" ng-show="<%= user.account.role == 'user' %>">
    <div class="box-header">
        <h3 class="box-title">Permission Denied</h3>
    </div>
    <ul class="list-group">
        <li class="list-group-item">You don't have permission to use this feature.<br></li>
    </ul>
</div>
        
<div class="box box-solid box-primary" ng-show="<%= user.account.role == 'admin' %> || <%= user.account.role == 'superadmin' %>">	
	<div class="table-responsive">
	    <table class="table table-striped table-bordered table-hover">
	<thead>
		<tr>
		    <th class="text-center">
		    	Username <a href="" ng-click="predicate = 'active'; reverse=!reverse"></a>
		    </th>
		    <th class="text-center">
		    	Status <a href="" ng-click="predicate = 'active'; reverse=!reverse"></a>
		    </th>
		    <th class="text-center">
		    	Created Date <a href="" ng-click="predicate = 'active'; reverse=!reverse"></a>
		    </th>
		    <th class="text-center">
		    	Last Active <a href="" ng-click="predicate = 'active'; reverse=!reverse"></a>
		    </th>
		    <th class="text-center">
		    	Role <a href="" ng-click="predicate = 'active'; reverse=!reverse"></a>
		    </th>
		</tr>
	</thead>

	    <tbody >
	    	<tr><div class="alert alert-success" ng-show="deletePlat.success">success: {{deletePlat.success}}</div></tr>
	    	<tr><div div class="alert alert-danger" ng-show="deletePlat.error">error: {{deletePlat.error}}</div></tr>
	    	<tr ng-repeat="(index, user) in users">
	    			<td class="text-center vcenter">
		        		<a>
			        		<h4> {{user.customerName}}</h4>
			        		<h4> {{user.userName}}</h4>
			    		</a>
			    	</td>
		        	
						<td class="text-center vcenter" ng-show="user.account.status=='active'">
							<a class="btn btn-success btn-xs" role="button" ng-click="setUserStatus(user,'inactive')">Active</a>
						</td>
						<td class="text-center vcenter" ng-show="user.account.status=='inactive'">
							<a class="btn btn-danger btn-xs" href ng-click="setUserStatus(user,'active')">Inactive</a>
						</td>
				    
					<td class="text-center vcenter">
		        		{{user.creationDate | date:'MM/dd/yyyy'}}
			    	</td>

			    	<td class="text-center vcenter">
		        		{{user.activeDate | date:'MMMM d, yyyy @ hh:mm:ssa'}}
			    	</td>

			    	<td class="text-center vcenter" >
		        		<!-- {{user.account.role}} -->
		        		<select ng-options="role as role for role in userRoles track by role" ng-model="user.account.role" ng-init="user.account.role" ng-change="setUserRole(user)"></select>
		        	</td>
		        
	        </tr>
	    </tbody>				            
	</table>

	</div>
</div>

<% include add-user-button.ejs %><br><br>
<% include modal-addUser.ejs %>